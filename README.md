# Unity 平台跳跃
将基于有限状态机和Unity的新输入系统 Input System

实现二段跳、土狼时间、小跳和预输入等角色控制

开发日志（一）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制][1] ：
 - 实现了状态机的基类
 - 角色状态类实现为可程序化对象类

开发日志（二）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （二）实现状态切换][2] :
 - 使用了字典和数组优化状态的存储和切换
 - 引用了新的 Input System
 - 实现了状态的切换
 - 开发日志（三）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （三）角色移动][3] :
 - 设置最高速和加速度并过插值来自己**物理模拟加减速效果**
 - 引用虚拟相机来实现相机跟随角色移动
 - 动画切换方式改为插值混合，使其更加流畅自然
 - 跑步切换到站立的动画切换可以自由选择是否立刻切换动画

开发日志（四）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （四）跳跃][4] :
 - 使用球体检测来检测地面
 - 检测当前状态动画是否播放结束
 - 添加跳跃的三个阶段状态以及切换逻辑
 - 取消角色重力并用曲线模拟跳跃下降过程
 - **通过按键时长来控制跳跃高度**，并有最低和最高限制
 - 落地状态添加状态硬直
 - 实现二段跳

开发日志（五）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （五）完善跳跃][5] :
 - 为二段跳和一段跳添加不同的特效和音效
 - 添加道具控制二段跳开关
 - **在角色落地后恢复所有道具**
 - 通过添加状态实现土狼时间
 - 实现预输入

开发日志（六）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （六）][6] :
 - 修复bug
 - 添加音效播放器
 - 通过委托实现不同道具交互
 - 通过事件频道管理委托
 - 添加通关UI，开始UI和失败UI
 - 添加角色死亡状态和漂浮状态
 - 漂浮状态可以将屏幕坐标转换为世界坐标来选择漂浮的位置

开发日志（七）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （七）][7] :
 - 修复bug（空中不减速、站立土狼时间不能移动）
 - 为按钮添加功能
 - 添加胜利状态
 - 状态驱动虚拟相机
 - 添加通关计时
 - 加入带参数的事件频道

开发日志（八）[lorling.cn-Unity-使用有限状态机实现2D平台跳跃游戏玩家控制 （八）冲刺][8] :
 - 修复bug（状态切换没有调用退出函数、部分减速会将速度设为向右、最后一关时下一关报错）
 - 左右按键输入优化
 - 添加冲刺状态
 - **对象池**实现残影
 - 实现冲刺CD
 - 实现向上冲刺

  [1]: http://lorling.cn/index.php/archives/436/
  [2]: http://lorling.cn/index.php/archives/444/
  [3]: http://lorling.cn/index.php/archives/448/
  [4]: http://lorling.cn/index.php/archives/452/
  [5]: http://lorling.cn/index.php/archives/460/
  [6]: http://lorling.cn/index.php/archives/467/
  [7]: http://lorling.cn/index.php/archives/476/
  [8]: http://lorling.cn/index.php/archives/480/